# 3. Firmware Download

This chapter describes how to download FWDN to the TOPST AI (Open
platform board) and log in the Linux console.

<br/><br/>

## 3.1 Fimeware Dowload Sequence

The downloading sequence of FWDN is as follows:

1.  Set the boot mode switch to fwdn boot mode.
2.  Open Windows prompt and test FWDN ND.
3.  Connect FWDN ND to board.
4.  Download fai file.

<br/><br/>

## 3.2 Connect TOPST AI and Host PC with Fwdn Boot

You can transfer the built image to TCC750x using FWDN.
TCC750x provides FWDN function by using the ethernet and UART.

<p align="center"><img src="https://github.com/topst-development/Documentation/blob/main/TOPST-AI/Software/media/Firmware Download.image1.png?raw=true"
style="width:2.21806in;height:2.80208in"</p>


<p align="center"><strong>Figure 3.1 Connection between Host PC and TOPST AI for FWDN</strong></p>

<br/>

### 3.2.1 Setting Environment for Host PC

Refer to chapter 3. FWDN in the 'TOPST AI-Software-Quick guide-1.Firmware Download'
document for detailed configuration settings for FWDN.

<br/>

### 3.2.2 Connect Ethernet and Uart Port Between TOPST AI And Host PC

To download firmware to TEST AI, you must connect between TEST AI and Host PC using Ethernet and USB A-to-C cables respectively

<p align="center"><img src="https://github.com/topst-development/Documentation/blob/main/TOPST-AI/Software/media/Firmware Download.image2.png?raw=true"
style="width:2.73516in;height:3.97402in" /></p>

<p align="center"><strong>Figure 3.2 Connect Port Between TOPST AI And Host PC</strong></p>

<br/>

### 3.3.3 Change Boot Mode

If you press boot mode switch and supply power, the FWDN boot process is
initiated. If you supply power without pressing boot mode switch, the
normal boot process is initiated.
Pressing reset switch causes the system to reset. If you want to
download a firmware, press boot mode switch and reset switch at the same
time to FWDN boot mode.

<p align="center"><img src="https://github.com/topst-development/Documentation/blob/main/TOPST-AI/Software/media/Firmware Download.image3.png?raw=true"
style="width:2.62077in;height:1.76042in" /></p>

<p align="center"><strong> Figure 3.3 Boot Mode Switch</strong></p>

<br/>

### 3.3.4 FWDN in Windows

1.  After image build, copy the created fwdn folder to the desktop, and
    save the file below inside the folder.

    - fwdn_nd.exe (copy from ~/\<Topst SDK Build directory\>/boot-firmware/fwdn_nd.exe )
    - fwdn_batch.bat (copy from ~/\<Topst SDK Build directory\>/boot-firmware/fwdn_batch.bat )

<p align="center"> <img src="https://github.com/topst-development/Documentation/blob/main/TOPST-AI/Software/media/Firmware Download.image4.png?raw=true"
style="width:5.01042in;height:2.05139in"</p>

<p align="center"><strong>Figure 3.4 Copy files for FWDN</strong></p>

2.  Run **fwdn_batch.bat** and enter the **port number**.

    <p align="center"><img src="https://github.com/topst-development/Documentation/blob/main/TOPST-AI/Software/media/Firmware Download.image5.png?raw=true"
    style="width:4.22917in;height:3.62292in"</p>

    <p align="center"><strong> Figure 3.5 Input Port Number for FWDN</strong></p>

3.  Finish FWDN

    <p align="center"><img src="https://github.com/topst-development/Documentation/blob/main/TOPST-AI/Software/media/Firmware Download.image6.png?raw=true"
    style="width:5.32292in;height:1.21597in"</p>
 

    <p align="center"><strong> Figure 3.6 Finish Firmware Download</strong></p>
