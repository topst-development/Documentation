# 1. Introduction
This page provides instructions on how to set up the host PC environment, with separate guides for setting up on Windows PC and Ubuntu PC.
<br/><br/>

# 2. Setting Host Environment (Windows)
This document provides instructions on how to set up WSL (Windows Subsystem for Linux) to use Linux on a Windows PC.

Since TOPST D3 Linux SDK is based on the Yocto Project, Linux version of TOPST D3 SDK follows the Yocto project.

You can install another version of Linux, but in this document, TOPST D3 Linux SDK is described based on Ubuntu 22.04.

If the host OS is Ubuntu, please proceed to Section 3.

<br>

## 2.1 Install WSL2 Ubuntu 

1. Excute Windows PowerShell with "**Run with administrator privileges**"
2. Enable the WSL2 System.
    ```
    dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart
    ```
3. Enable the Virtual Machine feature.
    ```
    dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart
    ```
4. Set WSL 2 to the default version.
    ```
    wsl --set-default-version 2
    ```
5. Search for Ubuntu 22.04.3 LTS in Microsoft Store and download it.

    * If you need to download the Linux kernel update package, download the latest package [here](https://learn.microsoft.com/ko-kr/windows/wsl/install-manual).

6. You may choose any user name during the Ubuntu installation
   
<br/>

## 2.2 Setting Environments

### 2.2.1 Accessing Ubuntu via WSL2
Open the Windows Command Prompt and enter the following command to access Ubuntu.
When you access Ubuntu, it starts in the /mnt/c/Users/[user name] directory by default.
```
wsl  // access ubuntu 
ls   // check contents in your directory
```
Refer to the figure 1.1 below to check the result (may vary depending on the user).
<p align="center"><img src="../../../Assets/TOPST D3-G/Software/1.1 wsl linux.png" width="500"></p>
<p align="center"><strong>Figure 1.1 WSL2 Screenshot </strong></p>

<br/>

### 2.2.2 Install SSH and Samba

After entering Ununtu, you can use additional utilities such as SSH and Samba for more convenient development environment. SSH and Samba allows you to execute commands on remote computers and copy files to other computers.
 - The following steps require the Host PC to be connected to the network. check your network condition as following commands
  ```
  $ sudo apt-get update
  $ sudo apt-get install -y net-tools
  $ ifconfig 
  ```

If SSH and Samba are already installed or you will not use them, you can skip this chapter.

Use the following command to install net-tools, SSH, Samba.

```
$ sudo apt-get update 
$ sudo apt install -y net-tools openssh-server samba
```


After downloading SSH and Samba, you should set each program to your environment.

<br/>

### 2.2.3 Utilities

Install the utilities at once. To use Yocto Project, the following utilities must be installed on Host PC(individual computer or development server).

Use the following command to install Utilities.

```
$ sudo apt-get install -y gawk wget git diffstat unzip texinfo gcc-multilib build-essential chrpath

$ sudo apt-get install -y socat cpio python3 python3-pip python3-pexpect xz-utils debianutils

$ sudo apt-get install -y iputils-ping python3-git python3-jinja2 libegl1-mesa libsdl1.2-dev pylint

$ sudo apt-get install -y xterm zstd ncftp curl git-lfs vim zip
```

<br/>

### 2.2.4 Install Repo

You can download TOPST D3 SDK through Android Repo.  
To install Repo, refer to the following website: https://source.android.com/source/downloading.html.  
If Repo is already installed, you can use it without re-installing.  
Before installing Repo, the installed Python version (3.6 or higher) should be properly set.

Use the following command to install repo.
```
$ sudo apt-get install repo
```

If you see the error messange '/usr/bin/env 'python' no such file or directory', use the following command that allows the file 'python' to point to 'python3'.

```
$ sudo ln -sf /usr/bin/python3 /usr/bin/python
```
If there is a Repo error, Use the following command to download the latest version and put it directly into the /usr/bin/ folder.

```
$ mkdir -p ~/bin

$ curl http://commondatastorage.googleapis.com/git-repo-downloads/repo > ~/bin/repo

$ chmod a+x ~/bin/repo

$ sudo mv ~/bin/repo /usr/bin/repo
```

<br/><br/>


# 3. Setting Host Environment (Ubuntu 22.04)
This section explains the setup process for Ubuntu as the host OS.
<br/>

## 3.1 Setting Environment
The following steps are to be executed in the Ubuntu terminal. (Shortcut: Ctrl+Alt+T)

### 3.1.1 Install SSH and Samba

After starting terminal in Ununtu, you can use additional utilities such as SSH and Samba for more convenient development environment. SSH and Samba allows you to execute commands on remote computers and copy files to other computers.
 - The following steps require the Host PC to be connected to the network. check your network condition as following commands
  ```
  $ sudo apt-get update
  $ sudo apt-get install -y net-tools
  $ ifconfig 
  ```

If SSH and Samba are already installed or you will not use them, you can skip this chapter.

Use the following command to install SSH, Samba.

```
$ sudo apt-get update 
$ sudo apt install -y openssh-server samba
```


After downloading SSH and Samba, you should set each program to your environment.

<br/>

### 3.1.2 Utilities

Install the utilities at once. To use Yocto Project, the following utilities must be installed on Host PC(individual computer or development server).

Use the following command to install Utilities.

```
$ sudo apt-get install -y gawk wget git diffstat unzip texinfo gcc-multilib build-essential chrpath

$ sudo apt-get install -y socat cpio python3 python3-pip python3-pexpect xz-utils debianutils

$ sudo apt-get install -y iputils-ping python3-git python3-jinja2 libegl1-mesa libsdl1.2-dev pylint

$ sudo apt-get install -y xterm zstd ncftp curl git-lfs vim zip
```

<br/>

### 3.1.3 Install Repo

You can download TOPST D3 SDK through Android Repo.  
To install Repo, refer to the following website: https://source.android.com/source/downloading.html.  
If Repo is already installed, you can use it without re-installing.  
Before installing Repo, the installed Python version (3.6 or higher) should be properly set.

Use the following command to install repo.
```
$ sudo apt-get install repo
```

If you see the error messange '/usr/bin/env 'python' no such file or directory', use the following command that allows the file 'python' to point to 'python3'.

```
$ sudo ln -sf /usr/bin/python3 /usr/bin/python
```
If there is a Repo error, Use the following command to download the latest version and put it directly into the /usr/bin/ folder.

```
$ mkdir -p ~/bin

$ curl http://commondatastorage.googleapis.com/git-repo-downloads/repo > ~/bin/repo

$ chmod a+x ~/bin/repo

$ sudo mv ~/bin/repo /usr/bin/repo
```
<br/>

### 3.1.4 Udev Rules for Telechips USB Device
After you excute following command, You don't need to use 'sudo' command when you download FWDN in Linux.
```
$ echo "SUBSYSTEM==\"usb\", ATTR{idVendor}==\"140e\", MODE=\"0666\", OWNER=\"${USER}\"" | sudo tee /etc/udev/rules.d/99-topst.rules
$ sudo udevadm control --reload-rules && sudo udevadm trigger
```
<br/><br/>