# 1. はじめに
---
このドキュメントでは、ホスト環境のセットアップ、SDKのビルド、ファームウェアダウンローダの使用、およびAI-GとPCの接続を含む、AI-G SDKのビルドに関するガイドラインを提供します。

このドキュメントには、以下の情報が含まれています：
- ホスト環境の設定
- イメージビルドガイド
- ファームウェアダウンロードガイド
- AI-GボードとPCの接続

<br/><br/><br/><br/>

# 2. ホスト環境の設定 (Windows)
---
この章では、ホストPC環境のセットアップ方法について説明します。Windows PCとUbuntu PCでのセットアップについて、それぞれ個別のガイドを提供します。
<br><br/><br/>

## 2.1 Windows環境
--- 
このドキュメントでは、Windows PC上でLinuxを使用するためのWindows Sub-system for Linux (WSL) のセットアップ方法について説明します。
AI-G Linux SDKはYocto Projectに基づいているため、AI-G SDKのLinuxバージョンはYocto Projectに従います。
別のバージョンのLinuxをインストールすることもできますが、このドキュメントでは、AI-G Linux SDKはUbuntu 22.04に基づいて説明されています。
ホストOSがUbuntuの場合は、セクション2.2に進んでください。
</br><br/>

### 2.1.1 WSL2 Ubuntuのインストール (Windows環境のみ)

1. "**管理者権限で実行**" でWindows PowerShellを実行します。
2. WSL2システムを有効にします。
    ```
    dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart
    ```
3. 仮想マシン機能を有効にします。
    ```
    dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart
    ```
4. WSLをデフォルトバージョンの2 (WSL2) に設定します。
    ```
    wsl --set-default-version 2
    ```
5. Microsoft StoreでUbuntu 22.04.3 LTSを検索してダウンロードします。

    * Linuxカーネル更新パッケージをダウンロードする必要がある場合は、[こちら](https://learn.microsoft.com/ko-kr/windows/wsl/install-manual)から最新のパッケージをダウンロードしてください。

6. Ubuntuのインストール中に任意のユーザー名を選択できます。

<br/><br/>


### 2.1.2 WSL2経由でのUbuntuへのアクセス
Windowsコマンドプロンプトを開き、以下のコマンドを入力してUbuntuにアクセスします。Ubuntuにアクセスすると、デフォルトで /mnt/c/Users/[ユーザー名] ディレクトリから開始されます。
```
wsl  // Ubuntuにアクセス 
ls   // ディレクトリ内のコンテンツを確認
```
結果を確認するには、図 2.1を参照してください (ユーザーによって異なる場合があります)。
<p align="center"><img src="https://raw.githubusercontent.com/topst-development/Documentation/refs/heads/main/Assets/TOPST%20AI-G/Software/Linux%20SDK/1.%20wsl%20linux.png" width="500"></p>
<p align="center"><strong>図 2.1 WSL2 スクリーンショット </strong></p>
<br/><br/>

### 2.1.3 ロケールの設定

WSL上でUbuntuを実行した後、適切な言語と地域設定を確保するためにロケールを設定する必要があります。en_US.UTF-8を使用することをお勧めします。en_US.UTF-8を使用するには、以下のコマンドを実行します。

```
sudo locale-gen en_US.UTF-8 && sudo update-locale LANG=en_US.UTF-8 
```

ロケールを設定した後、以下のコマンドを使用してロケールタイプを確認できます。

```
echo 'LANG=en_US.UTF-8' | sudo tee -a /etc/default/locale && \  

echo 'LC_ALL=en_US.UTF-8' | sudo tee -a /etc/default/locale 
```
<br/><br/>

### 2.1.4 SSHとSambaのインストール

Ubuntuに入った後、SSHやSambaなどの追加ユーティリティを使用して、より便利な開発環境を構築できます。SSHとSambaを使用すると、リモートコンピュータ上でコマンドを実行したり、他のコンピュータにファイルをコピーしたりできます。
 - 以下の手順では、ホストPCがネットワークに接続されている必要があります。以下のコマンドを使用してネットワークの状態を確認してください：
  ```
  $ sudo apt-get update
  $ sudo apt-get install -y net-tools
  $ ifconfig 
  ```

SSHとSambaがすでにインストールされている場合、またはそれらを使用しない場合は、この章をスキップできます。

以下のコマンドを使用して、net-tools、SSH、およびSambaをインストールします。

```
$ sudo apt-get update 
$ sudo apt install -y net-tools openssh-server samba
```


SSHとSambaをダウンロードした後、各プログラムを環境に合わせて設定する必要があります。
<br/><br/>

### 2.1.5 ユーティリティのインストール

ユーティリティを一括でインストールします。Yocto Projectを使用するには、以下のユーティリティをホストPC (パーソナルコンピュータまたは開発サーバー) にインストールする必要があります。

以下のコマンドを使用してユーティリティをインストールします。

```
$ sudo apt-get install -y gawk wget git diffstat unzip texinfo gcc-multilib build-essential chrpath

$ sudo apt-get install -y socat cpio python3 python3-pip python3-pexpect xz-utils debianutils

$ sudo apt-get install -y iputils-ping python3-git python3-jinja2 libegl1-mesa-dev libsdl1.2-dev pylint

$ sudo apt-get install -y xterm zstd ncftp curl git-lfs vim zip lz4
```
<br/><br/>


### 2.1.6 Repoのインストール (オプション)

***Repo***を使用してAI-G SDKをダウンロードできます。
***Repo***をインストールするには、以下のウェブサイトを参照してください：https://source.android.com/source/downloading.html。
***Repo***がすでにインストールされている場合は、再インストールせずに使用できます。
***Repo***をインストールする前に、Pythonバージョン3.6以降が適切に設定されていることを確認してください。

以下のコマンドを使用して***Repo***をインストールします。
```
$ sudo apt-get install repo
```

'/usr/bin/env 'python' no such file or directory' というエラーメッセージが表示される場合は、以下のコマンドを使用して 'python' ファイルが 'python3' を指すようにします。

```
$ sudo ln -sf /usr/bin/python3 /usr/bin/python
```
***Repo***エラーが発生した場合は、以下のコマンドを使用して最新バージョンをダウンロードし、/usr/bin/ フォルダに直接配置します。

```
$ mkdir -p ~/bin

$ curl http://commondatastorage.googleapis.com/git-repo-downloads/repo > ~/bin/repo

$ chmod a+x ~/bin/repo

$ sudo mv ~/bin/repo /usr/bin/repo
```
**第3章: イメージビルドガイド**に進んでください。

<br/><br/><br/>


## 2.2 Linux環境
---
このセクションでは、ホストOSとしてのUbuntuのセットアッププロセスについて説明します。
<br/><br/>

### 2.2.1 環境設定
以下の手順はUbuntuターミナルで実行します。(ショートカット: Ctrl+Alt+T)
<br/><br/>

### 2.2.2 ロケールの設定

WSL上でUbuntuを実行した後、適切な言語と地域設定を確保するためにロケールを設定する必要があります。en_US.UTF-8を使用することをお勧めします。en_US.UTF-8を使用するには、以下のコマンドを実行します。

```
sudo locale-gen en_US.UTF-8 && sudo update-locale LANG=en_US.UTF-8 
```

ロケールを設定した後、以下のコマンドを使用してロケールタイプを確認できます。

```
echo 'LANG=en_US.UTF-8' | sudo tee -a /etc/default/locale && \  

echo 'LC_ALL=en_US.UTF-8' | sudo tee -a /etc/default/locale 
```
<br/><br/>

### 2.2.3 SSHとSambaのインストール

Ubuntuでターミナルを起動した後、SSHやSambaなどの追加ユーティリティを使用して、より便利な開発環境を構築できます。SSHとSambaを使用すると、リモートコンピュータ上でコマンドを実行したり、他のコンピュータにファイルをコピーしたりできます。
 - 以下の手順では、ホストPCがネットワークに接続されている必要があります。以下のコマンドを使用してネットワークの状態を確認してください：
  ```
  $ sudo apt-get update
  $ sudo apt-get install -y net-tools
  $ ifconfig 
  ```

SSHとSambaがすでにインストールされている場合、またはそれらを使用しない場合は、この章をスキップできます。

以下のコマンドを使用してSSHとSambaをインストールします：

```
$ sudo apt-get update 
$ sudo apt install -y openssh-server samba
```


SSHとSambaをダウンロードした後、各プログラムを環境に合わせて設定する必要があります。

<br/><br/>

### 2.2.4 ユーティリティのインストール

ユーティリティを一括でインストールします。Yocto Projectを使用するには、以下のユーティリティをホストPC (パーソナルコンピュータまたは開発サーバー) にインストールする必要があります。

以下のコマンドを使用してユーティリティをインストールします。

```
$ sudo apt-get install -y gawk wget git diffstat unzip texinfo gcc-multilib build-essential chrpath

$ sudo apt-get install -y socat cpio python3 python3-pip python3-pexpect xz-utils debianutils

$ sudo apt-get install -y iputils-ping python3-git python3-jinja2 libegl1-mesa-dev libsdl1.2-dev pylint

$ sudo apt-get install -y xterm zstd ncftp curl git-lfs vim zip lz4
```
<br/><br/>


### 2.2.5 Repoのインストール (オプション)

***Repo***を使用してAI-G SDKをダウンロードできます。
***Repo***をインストールするには、以下のウェブサイトを参照してください：https://source.android.com/source/downloading.html。
***Repo***がすでにインストールされている場合は、再インストールせずに使用できます。
***Repo***をインストールする前に、Pythonバージョン3.6以降が適切に設定されていることを確認してください。

以下のコマンドを使用して***Repo***をインストールします。
```
$ sudo apt-get install repo
```

'/usr/bin/env 'python' no such file or directory' というエラーメッセージが表示される場合は、以下のコマンドを使用して 'python' ファイルが 'python3' を指すようにします。

```
$ sudo ln -sf /usr/bin/python3 /usr/bin/python
```
***Repo***エラーが発生した場合は、以下のコマンドを使用して最新バージョンをダウンロードし、/usr/bin/ フォルダに直接配置します。

```
$ mkdir -p ~/bin

$ curl http://commondatastorage.googleapis.com/git-repo-downloads/repo > ~/bin/repo

$ chmod a+x ~/bin/repo

$ sudo mv ~/bin/repo /usr/bin/repo
```
<br/><br/>

### 2.2.6 Telechips USBデバイス用Udevルール (オプション)
以下のコマンドを実行すると、Linux (ホストPC) で***FWDN***をダウンロードするときに**sudo**コマンドを使用する必要がなくなります。
```
$ echo "SUBSYSTEM==\"usb\", ATTR{idVendor}==\"140e\", MODE=\"0666\", OWNER=\"${USER}\"" | sudo tee /etc/udev/rules.d/99-topst.rules
$ sudo udevadm control --reload-rules && sudo udevadm trigger
```
**第3章: イメージビルドガイド**に進んでください。

<br/><br/><br/><br/>

# 3. イメージビルドガイド
---
このセクションでは、ホストPCにインストールされているUbuntu OS (WSLかローカルUbuntuインストールかに関係なく) に基づいたガイダンスを提供します。AI-GにアップロードされるイメージはYocto Projectを使用してビルドされるため、プロセスはUbuntu環境で実行する必要があります。
<br/><br/><br/>

## 3.1 SDKビルドの準備
---
AI-G SDKはYocto Project 4.0 Kirkstoneに基づいています。したがって、AI-G SDKを使用するには、ホストPC上でYocto Project環境を設定する必要があります。SDK、ソースミラー、およびツールをダウンロードするには、ユーティリティをインストールする必要があります。イメージをスムーズにビルドするには、PCに**少なくとも60 GBの空きストレージ**と**最低16 GBのRAM**が必要です。

<br/><br/><br/>

## 3.2 Yocto Project
---
Yocto Projectは、組み込みLinux開発に焦点を当てたオープンソースプロジェクトです。
Open Embeddedプロジェクトの一部であるPokyと、Linuxイメージを作成するためのビルドシステムとしてのbitbakeを組み合わせて使用します。
Yocto Projectを使用することで、ブートローダー、カーネル、およびrootfsを同時にビルドできます。

<br/><br/><br/>

## 3.3 Yocto Projectのタスクプロセス
---
図 3.1は、Yocto Projectのタスクプロセスを示しています。メタデータに基づいてアップストリームリポジトリからソースコードをダウンロードし、ビルドできます。ビルドが完了すると、パッケージ、イメージ、およびSDKが結果として提供されます。


<p align="center"><img src="https://raw.githubusercontent.com/topst-development/Documentation/refs/heads/main/Assets/TOPST%20AI-G/Software/Linux%20SDK/2.%20Yocto%20Project.png" ></p>

<p align="center"><strong>図 3.1 Yocto Project タスクプロセス</strong></p>

<br/><br/><br/>

## 3.4 AI-G SDKの構成
---
AI-G SDKをダウンロードした後、ディレクトリ構成は以下のようになります。


**表 3.1 AI-G SDKの構成**
<table border="1" cellspacing="0" cellpadding="5">
  <colgroup>
    <col style="width: 10%">
    <col style="width: 10%">
    <col style="width: 10%">
    <col style="width: 56%">
  </colgroup>
  <thead>
    <tr>
      <th colspan="3"style="text-align: center; vertical-align: middle;"><strong>項目</strong></th>
      <th style="text-align: center; vertical-align: middle;" ><strong>説明</strong></th>
    </tr>
  </thead>
  <tbody>
  <tr>
      <td colspan="3"style="text-align: center; vertical-align: middle;">easy-setup.sh</td>
      <td>SDKを自動的にダウンロードしてビルドするためのPythonスクリプト</td>
    </tr>
    <tr>
      <td colspan="3"style="text-align: center; vertical-align: middle;">stitch-fai-ai.sh</td>
      <td>AI-G faiイメージ (minimal + サンプルアプリケーション) を作成するためのスクリプト</td>
    </tr>
    <tr>
      <td colspan="3"style="text-align: center; vertical-align: middle;">stitch-fai-d3.sh</td>
      <td>D3-G faiイメージ (minimal + サンプルアプリケーション) を作成するためのスクリプト</td>
    </tr>
    <tr>
      <td colspan="3"style="text-align: center; vertical-align: middle;">mktcimg</td>
      <td rowspan="2">ビルドプロセスおよび<strong>FWDN</strong>に関連するツール</td>
    </tr>
    <tr>
      <td colspan="3"style="text-align: center; vertical-align: middle;">tools</td>
    </tr>
    <tr>
      <td rowspan="8"style="text-align: center; vertical-align: middle;">poky</td>
      <td colspan="2"style="text-align: center; vertical-align: middle;">poky</td>
      <td>Yocto Project 4.0 Kirkstone ビルドシステム</td>
    </tr>
    <tr>
      <td colspan="2"style="text-align: center; vertical-align: middle;">meta-openembedded</td>
      <td>OE-Coreをサポートするレイヤー</td>
    </tr>
    <tr>
      <td colspan="2"style="text-align: center; vertical-align: middle;">meta-arm</td>
      <td>Armツールチェーンをサポートするレイヤー</td>
    </tr>
    <tr>
      <td colspan="2"style="text-align: center; vertical-align: middle;">meta-topst-bsp</td>
      <td>TOPST BSPをサポートするレイヤー</td>
    </tr>
    <tr>
      <td colspan="2"style="text-align: center; vertical-align: middle;">meta-gplv2</td>
      <td>GPLv3ライセンスを回避するパッケージを含むレイヤー</td>
    </tr>
    <tr>
      <td colspan="2"style="text-align: center; vertical-align: middle;">meta-topst</td>
      <td>TOPST レシピ</td>
    </tr>
  </tbody>
</table>
<br/><br/><br/>


## 3.5 ビルドの準備
---
以下の章では、AI-GイメージをビルドするためにYocto Projectを構成する方法について説明します。
<br/><br/>

### 3.5.1 .gitconfigでのユーザーメールとユーザー名の設定
公式TOPST gitからAI-Gをダウンロードするには、メールと名前を設定します。
1. 以下のコマンドを入力します。
```
vi ~/.gitconfig
```
2. 以下の情報を入力します。
```
[user]
    email = User email
    name = User name
```
<br/><br/>

### 3.5.2 GitからAI-Gを取得
1. **topst-sdk**という名前の新しいディレクトリを作成し、現在のディレクトリを**topst-sdk**に変更します。
```
$ mkdir topst-sdk
$ cd topst-sdk
```
2. 以下のコマンドを実行してリポジトリを初期化します。

```
$ repo init -u https://github.com/topst-development/manifests.git -b release/1.0.0 -m linux_yp4.0_topst.xml

```

コマンドを実行した後、以下の出力が表示されます。

```

Downloading Repo source from https://gerrit.googlesource.com/git-repo

... A new version of repo (2.54) is available.
... New version is available at: /home/topst/topst-sdk/.repo/repo/repo
... The launcher is run from: /usr/bin/repo
!!! The launcher is not writable.  Please talk to your sysadmin or distro
!!! to get an update installed.


Your identity is: TopstDeveloper <topstdeveloper@gmail.com>
If you want to change this, please re-run 'repo init' with --config-name

repo has been initialized in /home/topst/topst-sdk

```

3. 以下のコマンドを実行してリポジトリを同期します。

```
$ repo sync
```

コマンドを実行した後、以下の出力が表示されます。

```
... A new version of repo (2.54) is available.
... New version is available at: /home/topst/topst-sdk/.repo/repo/repo
... The launcher is run from: /usr/bin/repo
!!! The launcher is not writable.  Please talk to your sysadmin or distro
!!! to get an update installed.

Fetching: 100% (12/12), done in 33.103s
Checking out:  25% (3/12), done in 0.863s
Checking out:  75% (9/12), done in 0.415s
repo sync has finished successfully.

```
<br/><br/><br/>

## 3.6 ビルドスクリプトの実行
---  
**./easy-setup.sh**スクリプトを実行すると、以下の画面が表示されます。


注意: **./easy-setup.sh**を再実行する場合、**yes**を選択するとビルドされたソースが削除されるため注意してください。

```
$ ./easy-setup.sh
```
<p align="center"><img src="https://raw.githubusercontent.com/topst-development/Documentation/refs/heads/main/Assets/TOPST%20AI-G/Software/Linux%20SDK/license1.png"></p>
<p align="center"><strong>図 3.2 エンドユーザー使用許諾契約</strong></p><br/>

画面の一番下までスクロールし、以下の通知を読んでください。この通知を読んだ後、右矢印キーを押して**[Enter]**を押します。
<p align="center"><img src="https://raw.githubusercontent.com/topst-development/Documentation/refs/heads/main/Assets/TOPST%20AI-G/Software/Linux%20SDK/license2.png"></p>
<p align="center"><strong>図 3.3 'Proceed to confirm' に移動</strong></p><br/>


すると、以下の画面が表示されます。
<p align="center"><img src="https://raw.githubusercontent.com/topst-development/Documentation/refs/heads/main/Assets/TOPST%20AI-G/Software/Linux%20SDK/license3.png" ></p>
<p align="center"><strong>図 3.4 同意画面 </strong></p><br/>

**[Enter]**を押して**Accept**を選択すると、以下のコマンドを使用してビルドできます。



topst-build.shは、D3-GおよびAI-Gボード用のTOPSTイメージをビルドするために必要なコア環境をセットアップするシェルスクリプトです。以下のコマンドを実行します。オプション1を選択すると、AI-GにメインOSをインストールする準備が整います。
```
$ source poky/meta-topst/topst-build.sh

Choose MACHINE
  1. ai-g-topst
  2. d3-g-topst-main
  3. d3-g-topst-sub
  4. d5-g-topst-main
  5. d5-g-topst-sub
select number(1-5) => 1
machine(ai-g-topst) selected.
You had no conf/local.conf file. This configuration file has therefore been
created for you from /home/topst/topst-sdk/poky/meta-topst/template/ai-g-topst/local.conf.sample
You may wish to edit it to, for example, select a different MACHINE (target
hardware). See conf/local.conf for more information as common configuration
options are commented.

You had no conf/bblayers.conf file. This configuration file has therefore been
created for you from /home/topst/topst-sdk/poky/meta-topst/template/ai-g-topst/bblayers.conf.sample
To add additional metadata layers into your configuration please add entries
to conf/bblayers.conf.

The Yocto Project has extensive documentation about OE including a reference
manual which can be found at:
    https://docs.yoctoproject.org

For more information about OpenEmbedded see the website:
    https://www.openembedded.org/

Yocto Project common targets are:
    core-image-minimal
    core-image-sato
    meta-toolchain
    adt-installer
    meta-ide-support


Telechips common targets are:
    telechips-topst-ai-image

    meta-toolchain-topst(Application Development Toolkit)


You can also run generated TOPST images on AI-G board

Other commonly useful commands are:
 - 'devtool' and 'recipetool' handle common recipe tasks
 - 'bitbake-layers' handles common layer tasks
 - 'oe-pkgdata-util' handles common target package tasks
```


これで、以下のコマンドを使用してAI-Gイメージをビルドできます。

```
$ bitbake telechips-topst-ai-image
```

ビルドイメージは以下のパスに作成されます：

- {TOPST_PATH}/build/ai-g-topst/tmp/deploy/images/ai-g-topst
<br/><br/><br/>

## 3.7 FWDNイメージの作成
---
このオプションは、バイナリをAI-Gプラットフォーム用のイメージに結合します。

output_aig.faiビルドイメージと***FWDN***ツールを含む "output_aig.fwdn.zip" は、以下のパスに作成されます：

- ~/topst-sdk/

```
$ cd ~/topst-sdk

$ ./stitch-fai-ai.sh -f

[mktcimg] v1.4.3 - Apr  2 2024 14:17:19
========== Parsing Partition List==========
PART 1====================
name : bl3_ca53_a
size : 4096 sector(2097152 byte)
location : build/ai-g-topst/tmp/deploy/images/ai-g-topst/u-boot.rom
PART 2====================
name : bl3_ca53_b
size : 4096 sector(2097152 byte)
location : build/ai-g-topst/tmp/deploy/images/ai-g-topst/u-boot.rom
PART 3====================
name : boot
size : 81920 sector(41943040 byte)
location : build/ai-g-topst/tmp/deploy/images/ai-g-topst/tc-boot-ai-g-topst.img
PART 4====================
name : system
size : 8388608 sector(4294967296 byte)
location : build/ai-g-topst/tmp/deploy/images/ai-g-topst/telechips-topst-ai-image-ai-g-topst.ext4
PART 5====================
name : dtb
size : 400 sector(204800 byte)
location : build/ai-g-topst/tmp/deploy/images/ai-g-topst/tcc7500-lpd4x321.dtb
PART 6====================
name : env
size : 2048 sector(1048576 byte)
location : (NULL)
PART 7====================
name : misc
size : 2048 sector(1048576 byte)
location : (NULL)
uuid : e1345e29-c2d9-48c6-b6f6-e79f951075b6 , part-name : bl3_ca53_a, first_lba : 34, last_lba : 4129
uuid : 8514440e-a994-4bfd-bf78-9cff3a2a3ede , part-name : bl3_ca53_b, first_lba : 4130, last_lba : 8225
uuid : df1ebb96-4bc2-4b04-bd48-57e6d362e901 , part-name : boot, first_lba : 8226, last_lba : 90145
uuid : 7961081c-8268-4c4c-a22b-f7241e8197fa , part-name : system, first_lba : 90146, last_lba : 8478753
uuid : 8838e311-66da-46c5-9dd0-0d9c721e4452 , part-name : dtb, first_lba : 8478754, last_lba : 8479153
uuid : 30d07c55-dd52-48c3-a6a2-e2ba30e9d6cf , part-name : env, first_lba : 8479154, last_lba : 8481201
uuid : f4a2cada-fa39-4c0e-8fb9-88064fce5f30 , part-name : misc, first_lba : 8481202, last_lba : 8483249
crc32 of header : 3c5c3dfa
crc32 of partition array : f120de17
DiskInfo.ullPartitionInfoStartOffset : 208, sizeof(tagDiskImageHeader) = 96
DiskInfo.ullPartitionInfoStartOffset : 17728, ptbl.guid_entry[0].first_lba = 34
idx : 0  bl3_ca53_a
BunchHeader.ullTargetAddress : 17408, BunchHeader.ullLength = 578048
idx : 1  bl3_ca53_b
BunchHeader.ullTargetAddress : 2114560, BunchHeader.ullLength = 578048
idx : 2  boot
BunchHeader.ullTargetAddress : 4211712, BunchHeader.ullLength = 17278976
idx : 3  system
BunchHeader.ullTargetAddress : 46154752, BunchHeader.ullLength = 337641472
idx : 4  dtb
BunchHeader.ullTargetAddress : 4341122048, BunchHeader.ullLength = 55296
crc32 of header : 3c5c3dfa
crc32 of partition array : 18c9eaf7
Complete to make fai file

===== arguments info =====

--storage_size : 6368709120
--parttype : gpt
--area_name : "SD Data"
--outfile : /home/topst/topst-sdk/.stitch_AcJHHLv/output_aig.fai
--gptfile : /home/topst/topst-sdk/.stitch_AcJHHLv/output_aig.gpt
--fplist : /home/topst/topst-sdk/.stitch_AcJHHLv/partition.list.ai
--sector_size : 512
--sparse_fill : 0
--partition_offset : 34 LBA(17408)
--last_part_align : 0

===========================

[+] Packaging FWDN binaries
  adding: output_aig.fai (deflated 74%)
  adding: boot-firmware/ (stored 0%)
  adding: boot-firmware/tcc750x_fwdn.json (deflated 53%)
  adding: boot-firmware/prebuilt/ (stored 0%)
  adding: boot-firmware/prebuilt/mxic_mx25l25645g_QPI_100_DTR.bin (deflated 86%)
  adding: boot-firmware/prebuilt/mxic_mx25l6433f_QPI_100_STR.bin (deflated 86%)
  adding: boot-firmware/prebuilt/mcert.bin (deflated 96%)
  adding: boot-firmware/prebuilt/tcc750x_sic_snor.rom (deflated 71%)
  adding: boot-firmware/prebuilt/common_snor_config_READ_3B.bin (deflated 90%)
  adding: boot-firmware/prebuilt/fwdn.rom (deflated 51%)
  adding: boot-firmware/prebuilt/bconf.bin (deflated 97%)
  adding: boot-firmware/prebuilt/dram_params.bin (deflated 82%)
  adding: boot-firmware/prebuilt/tcc750x_ap_snor.rom (deflated 65%)
  adding: boot-firmware/prebuilt/ca53_bl1.rom (deflated 49%)
  adding: boot-firmware/prebuilt/optee.rom (deflated 93%)
  adding: boot-firmware/prebuilt/ca53_bl2.rom (deflated 52%)
  adding: boot-firmware/prebuilt/hsm.bin (deflated 13%)
  adding: boot-firmware/prebuilt/sic-fw.rom (deflated 58%)
  adding: boot-firmware/tools/ (stored 0%)
  adding: boot-firmware/tools/mktcimg/ (stored 0%)
  adding: boot-firmware/tools/mktcimg/mktcimg (deflated 60%)
  adding: boot-firmware/tools/mktcimg/README_gpt_partition_table.txt (deflated 34%)
  adding: boot-firmware/tools/snor_image_maker/ (stored 0%)
  adding: boot-firmware/tools/snor_image_maker/tcc750x_sic_snor.json (deflated 80%)
  adding: boot-firmware/tools/snor_image_maker/tcc750x_ap_snor.json (deflated 85%)
  adding: boot-firmware/tools/snor_image_maker/snor_image_maker.py (deflated 63%)
  adding: boot-firmware/tools/signtool/ (stored 0%)
  adding: boot-firmware/tools/signtool/tccsignv3.py (deflated 75%)
  adding: boot-firmware/tools/signtool/genkey.sh (deflated 66%)
  adding: boot-firmware/tools/signtool/tccmcert.py (deflated 73%)
  adding: boot-firmware/tools/signtool/keys/ (stored 0%)
  adding: boot-firmware/tools/signtool/keys/rootkey/ (stored 0%)
  adding: boot-firmware/tools/signtool/keys/rootkey/signkey.pem (deflated 27%)
  adding: boot-firmware/tools/signtool/keys/rootkey/enckey.bin (stored 0%)
  adding: boot-firmware/tools/signtool/keys/masterkey/ (stored 0%)
  adding: boot-firmware/tools/signtool/keys/masterkey/signkey.pem (deflated 26%)
  adding: boot-firmware/tools/signtool/keys/masterkey/enckey.bin (stored 0%)
  adding: boot-firmware/tools/signtool/keys/imagekey/ (stored 0%)
  adding: boot-firmware/tools/signtool/keys/imagekey/signkey.pem (deflated 27%)
  adding: boot-firmware/tools/signtool/keys/imagekey/enckey.bin (stored 0%)
  adding: boot-firmware/tools/signtool/keys/hsmkey/ (stored 0%)
  adding: boot-firmware/tools/signtool/keys/hsmkey/signkey.pem (deflated 26%)
  adding: boot-firmware/tools/signtool/keys/hsmkey/enckey.bin (stored 0%)
  adding: boot-firmware/tools/signtool/lib/ (stored 0%)
  adding: boot-firmware/tools/signtool/lib/tccscram.so (deflated 57%)
  adding: boot-firmware/tools/signtool/README.md (deflated 20%)
  adding: boot-firmware/tools/signtool/tccsecfw.py (deflated 77%)
  adding: boot-firmware/tools/signtool/ssshsm.py (deflated 72%)
  adding: boot-firmware/tools/signtool/.gitignore (stored 0%)
  adding: boot-firmware/tools/signtool/tcckeys.py (deflated 60%)
  adding: boot-firmware/tools/signtool/tccscram.py (deflated 39%)
  adding: boot-firmware/tools/image_merge/ (stored 0%)
  adding: boot-firmware/tools/image_merge/image_merge_v00.py (deflated 61%)
  adding: boot-firmware/tools/snor_conf_maker/ (stored 0%)
  adding: boot-firmware/tools/snor_conf_maker/mxic_mx25l6433f_QPI_100_STR.xml (deflated 65%)
  adding: boot-firmware/tools/snor_conf_maker/snor_conf_maker.py (deflated 73%)
  adding: boot-firmware/tools/snor_conf_maker/mxic_mx25l25645g_QPI_100_DTR.xml (deflated 65%)
  adding: boot-firmware/tools/snor_conf_maker/common_snor_config_READ_3B.xml (deflated 64%)
  adding: boot-firmware/tools/bconf_maker/ (stored 0%)
  adding: boot-firmware/tools/bconf_maker/tcc750x_bconf.xml (deflated 56%)
  adding: boot-firmware/tools/bconf_maker/bconf_maker_v01.py (deflated 73%)
  adding: boot-firmware/tools/dram_parameters/ (stored 0%)
  adding: boot-firmware/tools/dram_parameters/tcmktool.py (deflated 59%)
  adding: boot-firmware/tools/dram_parameters/pms_table.py (deflated 80%)
  adding: boot-firmware/tools/dram_parameters/dram_param.py (deflated 81%)
  adding: boot-firmware/tools/dram_parameters/orbit_defines.py (deflated 70%)
  adding: boot-firmware/tcc750x_boot.json (deflated 84%)
  adding: fwdn_nd (deflated 68%)
  adding: fwdn_nd.bat (deflated 57%)
  adding: fwdn_nd.exe (deflated 68%)
  adding: fwdn_nd.sh (deflated 49%)
  adding: mktcimg (deflated 61%)
  adding: output_aig.gpt (deflated 98%)
  adding: output_aig.gpt.back (deflated 98%)
  adding: output_aig.gpt.prim (deflated 98%)
  adding: VtcUsbPort.dll (deflated 68%)

```
以下のログが表示されれば、"output_aig.fwdn.zip" ファイルが作成されたことを意味します。
```
$ ls
build  easy-setup.sh  mktcimg  output_aig.fwdn.zip  poky  stitch-fai-ai.sh  stitch-fai-d3.sh  tools
```

<br/><br/><br/><br/>

# 4. ファームウェアダウンローダ
---
この章では、***FWDN***をAI-Gにダウンロードし、Linuxコンソールにログインする方法について説明します。
***FWDN V8***は、Windows 10または11 64ビットおよびLinux環境でファームウェアをダウンロードするためのPCツールです。この章では、WindowsおよびLinux環境でのダウンロードのケースについて説明します。
<br/><br/><br/>

## 4.1 ファームウェアダウンロードシーケンス
---
***FWDN***のダウンロードシーケンスは以下の通りです：

1. ブートモードスイッチをUSBブートモード (FWDNモード) に設定します。
2. WindowsプロンプトまたはLinuxコンソールを開き、***FWDN V8***をテストします。
3. ***FWDN V8***をボードに接続します。
4. faiファイルをダウンロードします。

<br/><br/><br/>

## 4.2 USBブートモード (FWDNモード)
---
***FWDN***を使用して、ビルドしたイメージをAI-Gに転送できます。AI-Gは、イーサネットおよびUARTを使用して***FWDN***を提供します。

<p align="center"><img src="https://raw.githubusercontent.com/topst-development/Documentation/refs/heads/main/Assets/TOPST%20AI-G/Software/Linux%20SDK/3.%20connect%20host%20pc%20to%20topst%20ai-g.png" ></p>
<p align="center"><strong>図 4.1 FWDNのためのホストPCとAI-G間の接続</strong></p><br/>

***FWDN V8***を使用するには、AI-GボードをホストPCに以下のように接続します：

1. ホストPCにVTCドライバがインストールされていることを確認します。VTCドライバがインストールされていない場合は、第4.2.1章に示すようにインストールしてください。

2. USB Type-Cケーブル1本とイーサネットケーブル1本を用意します。

3. USBブートモードに入るには、USB Type-CケーブルをAI-GボードのUSB Type-C FWDNポートとホストPCに接続します。

4. イーサネットケーブル (RJ45) をAI-GボードのイーサネットポートとホストPCに接続します。

5. FWDNスイッチを押しながら、電源ケーブルをAI-Gボードに接続します。

<br/><br/><br/>

### 4.2.1 VCPドライバのインストール方法

管理者として実行して、ホストPCにVendor Telechips Certification (VTC) ドライバ ([VCPドライバ](https://drive.google.com/file/d/1muQnY8kuKxDsy3p3FUiQqcG34Zjk-mnR/view?usp=sharing)にあります) をインストールします。上記のようにFWDNモードでUSBを接続すると、Telechips VTC USBドライバは図 4.2のように設定されます。

<p align="center"><img src="https://raw.githubusercontent.com/topst-development/Documentation/refs/heads/main/Assets/TOPST%20AI-G/Software/Linux%20SDK/4.%20VTC.png" width="550"></p>
<p align="center"><strong>図 4.2 COMポートの確認</strong></p><br/>

<br/><br/>

### 4.2.2 イーサネットの設定

ホストPCネットワーク構成

- コントロールパネル → ネットワークとインターネット → ネットワークと共有センター -> アダプターの設定の変更 -> イーサネットのプロパティ
<p align="center"><img src="https://raw.githubusercontent.com/topst-development/Documentation/refs/heads/main/Assets/TOPST%20AI-G/Software/Linux%20SDK/5.%20network_setting.png"></p>
<p align="center"><strong>図 4.3 FWDNのためのイーサネットデバイスプロパティの設定</strong></p><br/>
<br/><br/><br/>

## 4.3 FWDNの実行方法
---
***FWDN***を実行する前に、まずビルド後に作成したイメージと***FWDN***ツールをUbuntu (WSL2) からWindows環境に転送する必要があります。
Ubuntuホストを使用している場合は、以下の手順をスキップして第4.3.2章に進むことができます。

1. "output_aig.fwdn.zip" を解凍します
```
$ cd ~/topst-sdk
$ mkdir images
$ mv ./output_aig.fwdn.zip ./images 
$ cd images
$ unzip output_aig.fwdn.zip
```

2. "images" フォルダをWindowsのCドライブにコピーします。
```
$ cd ..
$ cp -r ./images /mnt/c/ 
```
以下の手順については、ホストPCのOSに応じて第4.3.1章または第4.3.2章を参照してください。
<br/><br/>

### 4.3.1 Windows環境でのFWDNの実行
FWDNを実行する前に、AI-GボードのFWDNポートに接続されているポート番号を特定するためにWMICをインストールする必要があります。

1. 設定を開く: スタートメニューから設定を開きます。
<p align="center"><img src="https://raw.githubusercontent.com/topst-development/Documentation/refs/heads/main/Assets/TOPST%20AI-G/Software/Linux%20SDK/8.%20Open%20Settings%20from%20Start%20menu.png"></p>
<p align="center"><strong>図 4.4 スタートメニューから設定を開く</strong></p>  <br/>

2. システムを選択: システムメニューに移動します。
<p align="center"><img src="https://raw.githubusercontent.com/topst-development/Documentation/refs/heads/main/Assets/TOPST%20AI-G/Software/Linux%20SDK/9.%20Go%20to%20the%20System%20menu.png"></p>
<p align="center"><strong>図 4.5 システムメニューに移動</strong></p>  <br/>

3. オプション機能: オプション機能メニューをクリックします。
<p align="center"><img src="https://raw.githubusercontent.com/topst-development/Documentation/refs/heads/main/Assets/TOPST%20AI-G/Software/Linux%20SDK/10.%20Click%20the%20Selective%20Features%20menu.png"></p>
<p align="center"><strong>図 4.6 オプション機能メニューをクリック</strong></p>  <br/>

4. 機能の表示: **オプション機能を追加する**の横にある**機能を表示**ボタンをクリックします。
<p align="center"><img src="https://raw.githubusercontent.com/topst-development/Documentation/refs/heads/main/Assets/TOPST%20AI-G/Software/Linux%20SDK/11.%20Click%20the%20View%20Features%20button%20next%20to%20Add%20optional%20Features.png"></p>
<p align="center"><strong>図 4.7 オプション機能を追加するの横にある機能を表示ボタンをクリック</strong></p>  <br/>

5. WMIC検索: 検索ボックスに**"WMIC"**と入力します。
<p align="center"><img src="https://raw.githubusercontent.com/topst-development/Documentation/refs/heads/main/Assets/TOPST%20AI-G/Software/Linux%20SDK/12.%20Type%20WMIC%20in%20the%20search%20box.png"></p>
<p align="center"><strong>図 4.8 検索ボックスにWMICと入力</strong></p>  <br/>

6. インストール: WMIC項目を選択し、**"次へ"**ボタンをクリックしてインストールを完了します。
<p align="center"><img src="https://raw.githubusercontent.com/topst-development/Documentation/refs/heads/main/Assets/TOPST%20AI-G/Software/Linux%20SDK/13.%20Select%20the%20WMIC%20item%20and%20click%20the%20Next%20button%20to%20complete%20the%20installation.png"></p>
<p align="center"><strong>図 4.9 WMIC項目を選択し、次へボタンをクリックしてインストールを完了</strong></p>  <br/>

7. Windows PowerShellを実行し、“C:\images”に移動します。
```
$ cd C:\images 
```
8. **.\fwdn_nd.bat**コマンドを入力して、ファームウェアのダウンロードを開始します。“fwdn_nd.bat”は、***FWDN V8***を使用してファームウェアを自動的にダウンロードする実行可能ファイルです。

```
$ ./fwdn_nd.bat

TOPST AI-G FWDN Batch File

Find Port.
Silicon Labs CP210x USB to UART Bridge(COM44)

Input USB Port Number : 44


Step 1. Connect between Host PC and TOPST AI-G
[FWDNLogger::PrintCurTime:100] 25/06/12-16:11:36
[main:24] FWDN N-Dolphin v1.0.1 - 2024.9.24 16:18:11
[main:92] Start FWDN
[FWDN_ND::ImageSend:442] Complete to send MCERT image
[FWDN_ND::ImageSend:442] Complete to send HSM image
[FWDN_ND::ImageSend:442] Complete to send FWDN_BL1 image
[FWDN_ND::ImageSend:442] Complete to send FWDN_DRAM_PARAMETER image
[FWDN_ND::ImageSend:442] Complete to send FWDN_BL2 image
[FWDN_ND::ImageSend:442] Complete to send FWDN_BL3 image
[FWDN_ND::InfoDevice:123] ############## Device Info ##############
[PrintIP:527] ip      : 192.168.0.100
[PrintIP:527] mask    : 255.255.255.0
[PrintIP:527] gateway : 0.0.0.0
[FWDN_ND::InfoDevice:132] port : 8080
[FWDN_ND::InfoDevice:135]
mmc0_user: 7818182656 byte block_size: 512 byte
mmc0_boot0: 4194304 byte block_size: 512 byte
mmc0_boot1: 4194304 byte block_size: 512 byte
snor1: 0 byte
snor2: 0 byte
fw_version: tcc750x_v0.0.111
fw_build_id: g90e2b777
fw_build_date: 2024-09-24-17:11:42+0900

----- Firmware Information -----
VERSION    : tcc750x_v0.0.111
BUILD ID   : g90e2b777
BUILD DATE : 2024-09-24-17:11:42+0900

----- Detail of Storages -----
#### eMMC Info ####
Manufacture ID: 0x15
OEM: 0x100
Name: 0x8GTF4
User Capacity: 7.3 GiB (7818182656 Byte)
Boot Capacity: 4 MiB (4194304 Byte)
RPMB Capacity: 512 KiB (524288 Byte)
Speed Mode: HS200
#### SNOR Info ####

----- Summary of Storages -----
eMMC : O
SNOR : X
- O : Init success
- X : Init failed or not exist

----- Summary of DRAM Init -----
DRAM Init : Success
DRAM Size : TBD MB

----- PMU Status -----
PMU_USER   : 0x0
PMU_SIC_USER   : 0x80
PMU_CONFIG : 0x0
* BM : PMU_CONFIG[1:0]
-  0 : USB BOOT
-  1 : SNOR BOOT
-  2 : eMMC BOOT
-  3 : eMMC with SIC BOOT

--------------------------------

[FWDN_ND::LoadFwdnFW:676] TCP Ready OK
[main:156] Complete FWDN, Total Time = 18424 ms
[main:162] **Notification : For more detailed FWDN Log, use the -g or --debug option.

Step 2. Low-format
[FWDNLogger::PrintCurTime:100] 25/06/12-16:11:55
[main:24] FWDN N-Dolphin v1.0.1 - 2024.9.24 16:18:11
[main:92] Start FWDN
[FWDN_ND::InfoDevice:123] ############## Device Info ##############
[PrintIP:527] ip      : 192.168.0.100
[PrintIP:527] mask    : 255.255.255.0
[PrintIP:527] gateway : 0.0.0.0
[FWDN_ND::InfoDevice:132] port : 8080
[FWDN_ND::InfoDevice:135]
mmc0_user: 7818182656 byte block_size: 512 byte
mmc0_boot0: 4194304 byte block_size: 512 byte
mmc0_boot1: 4194304 byte block_size: 512 byte
snor1: 0 byte
snor2: 0 byte
fw_version: tcc750x_v0.0.111
fw_build_id: g90e2b777
fw_build_date: 2024-09-24-17:11:42+0900

----- Firmware Information -----
VERSION    : tcc750x_v0.0.111
BUILD ID   : g90e2b777
BUILD DATE : 2024-09-24-17:11:42+0900

----- Detail of Storages -----
#### eMMC Info ####
Manufacture ID: 0x15
OEM: 0x100
Name: 0x8GTF4
User Capacity: 7.3 GiB (7818182656 Byte)
Boot Capacity: 4 MiB (4194304 Byte)
RPMB Capacity: 512 KiB (524288 Byte)
Speed Mode: HS200
#### SNOR Info ####

----- Summary of Storages -----
eMMC : O
SNOR : X
- O : Init success
- X : Init failed or not exist

----- Summary of DRAM Init -----
DRAM Init : Success
DRAM Size : TBD MB

----- PMU Status -----
PMU_USER   : 0x0
PMU_SIC_USER   : 0x80
PMU_CONFIG : 0x0
* BM : PMU_CONFIG[1:0]
-  0 : USB BOOT
-  1 : SNOR BOOT
-  2 : eMMC BOOT
-  3 : eMMC with SIC BOOT

--------------------------------

[ParseStorageSize:558] 1
[ParseStorageSize:583] 7818182656,7818182656
[FWDN_ND::LoadFwdnFW:676] TCP Ready OK
[FWDN_ND::LowformatCommand:1495] Lowformat Start(eMMC)
[main:156] Complete FWDN, Total Time = 1755 ms
[main:162] **Notification : For more detailed FWDN Log, use the -g or --debug option.

Step 3. Download boot-firmware
[FWDNLogger::PrintCurTime:100] 25/06/12-16:11:57
[main:24] FWDN N-Dolphin v1.0.1 - 2024.9.24 16:18:11
[main:92] Start FWDN
[FWDN_ND::InfoDevice:123] ############## Device Info ##############
[PrintIP:527] ip      : 192.168.0.100
[PrintIP:527] mask    : 255.255.255.0
[PrintIP:527] gateway : 0.0.0.0
[FWDN_ND::InfoDevice:132] port : 8080
[FWDN_ND::InfoDevice:135]
mmc0_user: 7818182656 byte block_size: 512 byte
mmc0_boot0: 4194304 byte block_size: 512 byte
mmc0_boot1: 4194304 byte block_size: 512 byte
snor1: 0 byte
snor2: 0 byte
fw_version: tcc750x_v0.0.111
fw_build_id: g90e2b777
fw_build_date: 2024-09-24-17:11:42+0900

----- Firmware Information -----
VERSION    : tcc750x_v0.0.111
BUILD ID   : g90e2b777
BUILD DATE : 2024-09-24-17:11:42+0900

----- Detail of Storages -----
#### eMMC Info ####
Manufacture ID: 0x15
OEM: 0x100
Name: 0x8GTF4
User Capacity: 7.3 GiB (7818182656 Byte)
Boot Capacity: 4 MiB (4194304 Byte)
RPMB Capacity: 512 KiB (524288 Byte)
Speed Mode: HS200
#### SNOR Info ####

----- Summary of Storages -----
eMMC : O
SNOR : X
- O : Init success
- X : Init failed or not exist

----- Summary of DRAM Init -----
DRAM Init : Success
DRAM Size : TBD MB

----- PMU Status -----
PMU_USER   : 0x0
PMU_SIC_USER   : 0x80
PMU_CONFIG : 0x0
* BM : PMU_CONFIG[1:0]
-  0 : USB BOOT
-  1 : SNOR BOOT
-  2 : eMMC BOOT
-  3 : eMMC with SIC BOOT

--------------------------------

[FWDN_ND::LoadFwdnFW:676] TCP Ready OK
[main:121] Start Write
[FWDN_ND::GetFileAndWriteCommand:1388] C:\images\boot-firmware\.\prebuilt\bconf.bin
[FWDN_ND::GetFileAndWriteCommand:1388] C:\images\boot-firmware\.\prebuilt\bconf.bin
[FWDN_ND::GetFileAndWriteCommand:1388] C:\images\boot-firmware\.\prebuilt\mcert.bin
[FWDN_ND::GetFileAndWriteCommand:1388] C:\images\boot-firmware\.\prebuilt\mcert.bin
[FWDN_ND::GetFileAndWriteCommand:1388] C:\images\boot-firmware\.\prebuilt\dram_params.bin
[FWDN_ND::GetFileAndWriteCommand:1388] C:\images\boot-firmware\.\prebuilt\dram_params.bin
[FWDN_ND::GetFileAndWriteCommand:1388] C:\images\boot-firmware\.\prebuilt\hsm.bin
[FWDN_ND::GetFileAndWriteCommand:1388] C:\images\boot-firmware\.\prebuilt\hsm.bin
[FWDN_ND::GetFileAndWriteCommand:1388] C:\images\boot-firmware\.\prebuilt\ca53_bl1.rom
[FWDN_ND::GetFileAndWriteCommand:1388] C:\images\boot-firmware\.\prebuilt\ca53_bl1.rom
[FWDN_ND::GetFileAndWriteCommand:1388] C:\images\boot-firmware\.\prebuilt\ca53_bl2.rom
[FWDN_ND::GetFileAndWriteCommand:1388] C:\images\boot-firmware\.\prebuilt\ca53_bl2.rom
[FWDN_ND::GetFileAndWriteCommand:1388] C:\images\boot-firmware\.\prebuilt\optee.rom
[FWDN_ND::GetFileAndWriteCommand:1388] C:\images\boot-firmware\.\prebuilt\optee.rom
[main:156] Complete FWDN, Total Time = 3307 ms
[main:162] **Notification : For more detailed FWDN Log, use the -g or --debug option.
100%[||||||||||||||||||||||||||||||] 328064/328064
Step 4. Download FAI file (system image)
[FWDNLogger::PrintCurTime:100] 25/06/12-16:12:00
[main:24] FWDN N-Dolphin v1.0.1 - 2024.9.24 16:18:11
[main:92] Start FWDN
[FWDN_ND::InfoDevice:123] ############## Device Info ##############
[PrintIP:527] ip      : 192.168.0.100
[PrintIP:527] mask    : 255.255.255.0
[PrintIP:527] gateway : 0.0.0.0
[FWDN_ND::InfoDevice:132] port : 8080
[FWDN_ND::InfoDevice:135]
mmc0_user: 7818182656 byte block_size: 512 byte
mmc0_boot0: 4194304 byte block_size: 512 byte
mmc0_boot1: 4194304 byte block_size: 512 byte
snor1: 0 byte
snor2: 0 byte
fw_version: tcc750x_v0.0.111
fw_build_id: g90e2b777
fw_build_date: 2024-09-24-17:11:42+0900

----- Firmware Information -----
VERSION    : tcc750x_v0.0.111
BUILD ID   : g90e2b777
BUILD DATE : 2024-09-24-17:11:42+0900

----- Detail of Storages -----
#### eMMC Info ####
Manufacture ID: 0x15
OEM: 0x100
Name: 0x8GTF4
User Capacity: 7.3 GiB (7818182656 Byte)
Boot Capacity: 4 MiB (4194304 Byte)
RPMB Capacity: 512 KiB (524288 Byte)
Speed Mode: HS200
#### SNOR Info ####

----- Summary of Storages -----
eMMC : O
SNOR : X
- O : Init success
- X : Init failed or not exist

----- Summary of DRAM Init -----
DRAM Init : Success
DRAM Size : TBD MB

----- PMU Status -----
PMU_USER   : 0x0
PMU_SIC_USER   : 0x80
PMU_CONFIG : 0x0
* BM : PMU_CONFIG[1:0]
-  0 : USB BOOT
-  1 : SNOR BOOT
-  2 : eMMC BOOT
-  3 : eMMC with SIC BOOT

--------------------------------

[ParseStorageSize:558] 1
[ParseStorageSize:583] 7818182656,7818182656
[FWDN_ND::LoadFwdnFW:676] TCP Ready OK
[main:121] Start Write
[FWDN_ND::GetFileAndWriteCommand:1388] output_aig.fai
[main:156] Complete FWDN, Total Time = 71367 ms
[main:162] **Notification : For more detailed FWDN Log, use the -g or --debug option.
100%[||||||||||||||||||||||||||||||] 356166304/356166304
TOPST AI-G FWDN is complete!
```
<br/><br/>

### 4.3.2 Linux環境でのFWDNの実行

Linux環境では、以下のコマンドを入力してAI-Gイメージをダウンロードできます。

```
./fwdn.sh 
```
***FWDN***が完了したら、FWDNポートからUSB Type-Cケーブルを取り外し、電源ケーブルを取り外します。

<br/><br/><br/>



## 4.4. UARTを使用したAI-Gボードの接続
--- 
以下の手順を実行し、UART接続を使用してファームウェアのダウンロードが正常に完了したことを確認します。

1. Windows環境にシリアルポートドライバ (例: CP210x Windows Driver) とPL2303_prolificドライバをインストールします。
2. Tera TermやPuTTYなどのターミナルエミュレータをインストールします。
3. ホストPCとAI-GボードのUARTピンを接続します。USB-TTLケーブルを使用します。
4. 黒いケーブルをGNDピンに接続します。
5. 白いケーブル (RXD) をUARTピンのTXピンに接続し、緑色のケーブル (TXD) をUARTピンのRXピンに接続します。
6. ターミナルエミュレータアプリケーションを実行します。
7. PCのデバイスマネージャーを開き、UARTに使用されているポート番号を確認します。
8. ターミナルエミュレータの**Serial line**フィールドに、デバイスマネージャーで確認したポート番号を入力します。**Speed** (bps) を115200に設定し、**Flow controlをNone**に設定します。
9. 電源ケーブルを接続します。すると、AI-GはデフォルトのeMMCブートモードで起動します。

 
<p align="center"><img src="https://raw.githubusercontent.com/topst-development/Documentation/refs/heads/main/Assets/TOPST%20AI-G/Software/Linux%20SDK/6.%20UART%20Connection%20with%20Host%20PC.png"></p>
<p align="center"><strong>図 4.10 ホストPCとのUART接続</strong></p>  <br/>


図 4.11は、成功したログインを示しています。

<p align="center"><img src="https://raw.githubusercontent.com/topst-development/Documentation/refs/heads/main/Assets/TOPST%20AI-G/Software/Linux%20SDK/7.%20connenct%20screen.png" width="550"></p>
<p align="center"><strong>図 4.11 接続画面 (IDとパスワードはtopst)</strong></p> <br/>
